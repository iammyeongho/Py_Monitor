# 프로젝트 흐름도

## 1. 시스템 아키텍처 흐름도

```mermaid
graph TD
    A[사용자] --> B[프론트엔드]
    B --> C[FastAPI 서버]
    C --> D[데이터베이스]
    C --> E[Redis 캐시]
    C --> F[이메일 서버]
    C --> G[웹훅 서버]
    H[모니터링 서비스] --> C
    I[백업 서비스] --> D
```

## 2. 사용자 인증 흐름

```mermaid
sequenceDiagram
    participant U as 사용자
    participant F as 프론트엔드
    participant A as API 서버
    participant D as 데이터베이스

    U->>F: 로그인 요청
    F->>A: POST /api/v1/login
    A->>D: 사용자 검증
    D-->>A: 사용자 정보
    A-->>F: JWT 토큰
    F-->>U: 로그인 성공
```

## 3. 모니터링 프로세스 흐름

```mermaid
graph LR
    A[시스템 리소스] --> B[모니터링 서비스]
    B --> C{임계값 체크}
    C -->|초과| D[알림 생성]
    C -->|정상| E[데이터 저장]
    D --> F[이메일 알림]
    D --> G[웹훅 알림]
    E --> H[데이터베이스]
```

## 4. 알림 시스템 흐름

```mermaid
sequenceDiagram
    participant M as 모니터링
    participant N as 알림 서비스
    participant T as 템플릿
    participant E as 이메일
    participant W as 웹훅

    M->>N: 알림 요청
    N->>T: 템플릿 조회
    T-->>N: 템플릿 반환
    N->>E: 이메일 전송
    N->>W: 웹훅 전송
    E-->>N: 전송 완료
    W-->>N: 전송 완료
```

## 5. 데이터 처리 흐름

### 5.1 데이터 수집
1. 시스템 리소스 모니터링
   - CPU 사용량
   - 메모리 사용량
   - 디스크 사용량
   - 네트워크 트래픽

2. 데이터 정규화
   - 단위 변환
   - 데이터 포맷팅
   - 이상치 제거

3. 데이터 저장
   - 실시간 데이터: Redis
   - 히스토리 데이터: PostgreSQL

### 5.2 데이터 분석
1. 실시간 분석
   - 임계값 비교
   - 트렌드 분석
   - 이상 감지

2. 히스토리 분석
   - 일간/주간/월간 통계
   - 성능 추이 분석
   - 리소스 사용 패턴

## 6. 프론트엔드 흐름

### 6.1 페이지 로드
1. 초기 로드
   - 인증 상태 확인
   - 기본 데이터 로드
   - UI 렌더링

2. 실시간 업데이트
   - WebSocket 연결
   - 데이터 구독
   - UI 업데이트

### 6.2 사용자 인터랙션
1. 데이터 조회
   - 필터링
   - 정렬
   - 페이지네이션

2. 설정 변경
   - 알림 설정
   - 임계값 설정
   - UI 설정

## 7. 백엔드 API 흐름

### 7.1 요청 처리
1. 인증/인가
   - JWT 토큰 검증
   - 권한 확인
   - 요청 유효성 검사

2. 비즈니스 로직
   - 데이터 처리
   - 비즈니스 규칙 적용
   - 결과 생성

3. 응답 생성
   - 데이터 직렬화
   - 에러 처리
   - 응답 전송

### 7.2 비동기 작업
1. 백그라운드 작업
   - 데이터 백업
   - 리포트 생성
   - 알림 전송

2. 스케줄링
   - 주기적 작업
   - 일회성 작업
   - 작업 우선순위

## 8. 에러 처리 흐름

```mermaid
graph TD
    A[에러 발생] --> B{에러 타입}
    B -->|인증| C[로그인 페이지]
    B -->|권한| D[접근 거부]
    B -->|서버| E[에러 페이지]
    B -->|네트워크| F[재시도]
    C --> G[로그인]
    D --> H[권한 요청]
    E --> I[관리자 알림]
    F --> J[재연결]
```

## 9. 배포 흐름

```mermaid
graph LR
    A[개발] --> B[테스트]
    B --> C[스테이징]
    C --> D[프로덕션]
    D --> E[모니터링]
    E --> F{문제 발생}
    F -->|Yes| G[롤백]
    F -->|No| H[운영]
``` 